<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RevAIse - Convert YouTube Videos & Adapt Text</title>
  <!-- Bootstrap CSS (via CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-9ndCyUa6mY5v/giwlvNBDppJZ3fXq9p3LQl0oK1MZtwt6S3mB1p1HNKhXQqWl5Q"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    /* Inline custom CSS (you can also place these rules in styles.css) */
    body {
      font-family: "Arial", sans-serif;
      background-color: #fdf6e3;
      color: #333;
    }
    /* Hero section styles */
    .hero-section {
      position: relative;
      background: url("{{ url_for('static', filename='hero-image.jpeg') }}") no-repeat center center;
      background-size: cover;
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
    }
    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
    }
    .hero-content {
      position: relative;
      z-index: 1;
    }
    .section-title {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    footer {
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="#">RevAIse</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#youtube-section">YouTube to Slides</a></li>
          <li class="nav-item"><a class="nav-link" href="#text-converter">Adapt Text</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content text-center">
      <h1 class="display-3 fw-bold">RevAIse</h1>
      <p class="lead">Transform YouTube Videos into Engaging Presentations & Adapt Text for Any Reading Level</p>
      <a href="#youtube-section" class="btn btn-primary btn-lg mt-3">Get Started</a>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container my-5">
    <!-- YouTube to Slides Section -->
    <section id="youtube-section">
      <div class="card shadow mb-5">
        <div class="card-body">
          <h2 class="card-title text-center mb-4 section-title">Generate Slides from YouTube</h2>
          <form id="summaryForm">
            <div class="mb-3">
              <input type="text" class="form-control form-control-lg" name="youtube_url" placeholder="Enter YouTube URL" required>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg">Generate Slides</button>
            </div>
          </form>
          <!-- Error Message Container -->
          <p id="errorMessage" class="text-danger mt-3"></p>
        </div>
      </div>
    </section>

    <!-- Adapt Text Section -->
    <section id="text-converter">
      <div class="card shadow">
        <div class="card-body">
          <h2 class="card-title text-center mb-4 section-title">Adapt Text for Reading Level</h2>
          <form id="convertForm">
            <div class="mb-3">
              <textarea class="form-control" name="input_text" placeholder="Paste your text here..." rows="6" required></textarea>
            </div>
            <div class="mb-3">
              <label for="yearGroup" class="form-label">Select Year Group:</label>
              <select class="form-select" name="year_group" id="yearGroup" required>
                <option value="Year 1">Year 1</option>
                <option value="Year 2">Year 2</option>
                <option value="Year 3">Year 3</option>
                <option value="Year 4">Year 4</option>
                <option value="Year 5">Year 5</option>
                <option value="Year 6">Year 6</option>
                <option value="Year 7">Year 7</option>
                <option value="Year 8">Year 8</option>
                <option value="Year 9">Year 9</option>
                <option value="Year 10">Year 10</option>
                <option value="Year 11">Year 11</option>
              </select>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-success btn-lg">Convert</button>
            </div>
          </form>
          <!-- Converted Output Container -->
          <div id="convertedOutput" class="mt-3"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white py-4">
    <div class="container text-center">
      &copy; {{ current_year if current_year else '2025' }} RevAIse. All rights reserved.
    </div>
  </footer>

  <!-- Bootstrap Bundle JS (includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeo7FjK9nY7Nx2D5T1N8E+4TpsWe7mN9ZCk5mV2QyZcVJ4zN"
    crossorigin="anonymous"></script>

  <!-- JavaScript for Form Handling -->
  <script>
    // YouTube Transcript/Slides Form
    document.getElementById("summaryForm").addEventListener("submit", function (event) {
      event.preventDefault();
      document.getElementById("errorMessage").innerText = "";
      const youtubeUrl = event.target.youtube_url.value;
      fetch("/generate_summary", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ youtube_url: youtubeUrl })
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(errData => { throw new Error(errData.error || "Network response was not OK"); });
        }
        return response.json();
      })
      .then(data => {
        console.log("Data received:", data);
        // Handle the transcript/slide generation response (e.g., display links or status)
      })
      .catch(error => {
        document.getElementById("errorMessage").innerText = "Error: " + error.message;
      });
    });

    // Text Adaptation Form
    document.getElementById("convertForm").addEventListener("submit", function (event) {
      event.preventDefault();
      document.getElementById("convertedOutput").innerHTML = "";
      const inputText = event.target.input_text.value;
      const yearGroup = event.target.year_group.value;
      fetch("/convert_text", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ input_text: inputText, year_group: yearGroup })
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(errData => { throw new Error(errData.error || "Conversion failed"); });
        }
        return response.json();
      })
      .then(data => {
        document.getElementById("convertedOutput").innerHTML = "<h4>Converted Text:</h4><p>" + data.converted_text + "</p>";
      })
      .catch(error => {
        document.getElementById("convertedOutput").innerHTML = "<p class='text-danger'>Error: " + error.message + "</p>";
      });
    });
  </script>
</body>
</html>
